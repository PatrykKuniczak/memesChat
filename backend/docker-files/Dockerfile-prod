FROM node:19.3-alpine

WORKDIR /backend

COPY . .

ENV NODE_ENV=production

RUN npm ci --production --legacy-peer-deps

RUN npm run build

CMD [ "node", "dist/main"]